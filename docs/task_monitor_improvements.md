# ä»»åŠ¡æ‰§è¡Œç›‘æ§æ”¹è¿›æ€»ç»“

## ä¸»è¦æ”¹è¿›ç‚¹

### 1. çŠ¶æ€ç›‘æ§ç­–ç•¥ï¼ˆå®Œå…¨å¤ç”¨Codex Outputï¼‰

#### çŠ¶æ€ç å¤„ç†
```python
# å®Œæ•´çš„çŠ¶æ€ç æ˜ å°„
"running"     -> "ğŸ”„ è¿è¡Œä¸­..."
"0"          -> "âœ… æ‰§è¡ŒæˆåŠŸ"
"124"        -> "â±ï¸ æ‰§è¡Œè¶…æ—¶"
"127"        -> "âŒ æ‰¾ä¸åˆ°å‘½ä»¤"
"interrupted" -> "â¹ï¸ å·²ä¸­æ–­"
"-1"         -> "â¹ï¸ ç”¨æˆ·ä¸­æ–­"
"-15"        -> "â¹ï¸ è¢«ç»ˆæ­¢"
å…¶ä»–è´Ÿæ•°      -> "â¹ï¸ ä¿¡å· {abs(code)}"
å…¶ä»–æ­£æ•°      -> "âš ï¸ é€€å‡ºç  {code}"
```

#### é”™è¯¯æ–‡ä»¶ç›‘æ§
- ä½¿ç”¨å“ˆå¸Œå€¼é¿å…é‡å¤å¤„ç†ç›¸åŒé”™è¯¯
- æ£€æŸ¥æœ€è¿‘3æ¡æ¶ˆæ¯é¿å…é‡å¤æ·»åŠ 
- è‡ªåŠ¨è·Ÿè¸ªæ—¶è·³è½¬åˆ°é”™è¯¯æ¶ˆæ¯

### 2. æµå¼è¾“å‡ºä¼˜åŒ–ï¼ˆè§£å†³é˜»å¡é—®é¢˜ï¼‰

#### ç¼“å†²åŒºç­–ç•¥
```python
# æ‰¹é‡å¤„ç†è¾“å‡ºï¼Œé¿å…UIé˜»å¡
buffer = []
last_flush_time = time.time()

# ç¼“å†²åŒºåˆ·æ–°æ¡ä»¶ï¼š
# 1. æ—¶é—´è¶…è¿‡100ms
# 2. ç¼“å†²åŒºè¶…è¿‡10è¡Œ
# 3. æ²¡æœ‰æ›´å¤šè¾“å‡ºæ—¶

if current_time - last_flush_time > 0.1 or len(buffer) >= 10:
    for line in buffer:
        process_line(line)
    buffer.clear()
    time.sleep(0.001)  # è®©å‡ºCPU
```

#### æ–‡ä»¶ç›‘æ§æ‰¹å¤„ç†
```python
# å¤§é‡è¾“å‡ºæ—¶åˆ†æ‰¹å¤„ç†
lines = new_content.split('\n')
for i in range(0, len(lines), 20):  # æ¯æ‰¹20è¡Œ
    batch = lines[i:i+20]
    for line in batch:
        process_line(line)
    if i + 20 < len(lines):
        time.sleep(0.01)  # æ‰¹æ¬¡é—´æš‚åœ
```

### 3. è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†

#### åœæ­¢æ‰§è¡ŒæŒ‰é’®
```python
# å®Œæ•´çš„è¿›ç¨‹ç»ˆæ­¢æµç¨‹
1. è®¾ç½®è¿è¡Œæ ‡å¿—ä¸ºFalse
2. Unix: å‘é€SIGTERMåˆ°è¿›ç¨‹ç»„
3. Windows: è°ƒç”¨terminate()
4. ç­‰å¾…2ç§’ä¼˜é›…é€€å‡º
5. è¶…æ—¶åˆ™å¼ºåˆ¶kill
6. æ›´æ–°çŠ¶æ€æ–‡ä»¶ä¸º"interrupted"
```

#### æ¸…ç†é¡ºåºä¼˜åŒ–
```python
# ç¡®ä¿è¿›ç¨‹å®Œå…¨ç»“æŸåæ‰æ¸…ç†
1. ç­‰å¾…è¾“å‡ºçº¿ç¨‹å®Œæˆï¼ˆ1ç§’ï¼‰
2. ç­‰å¾…é”™è¯¯çº¿ç¨‹å®Œæˆï¼ˆ1ç§’ï¼‰
3. ç­‰å¾…ç›‘æ§çº¿ç¨‹å®Œæˆï¼ˆ2ç§’ï¼‰
4. ä¿å­˜æ—¥å¿—æ–‡ä»¶
5. ç­‰å¾…è¿›ç¨‹å®Œå…¨ç»ˆæ­¢ï¼ˆ2ç§’ï¼‰
6. å»¶è¿Ÿ0.5ç§’ç¡®ä¿æ–‡ä»¶æ“ä½œå®Œæˆ
7. æ¸…ç†todolistç›®å½•
```

### 4. ç›‘æ§é¢‘ç‡è°ƒæ•´

- Codex Output: æ¯1ç§’æ£€æŸ¥ä¸€æ¬¡
- ä»»åŠ¡æ‰§è¡Œ: æ¯0.5ç§’æ£€æŸ¥ä¸€æ¬¡ï¼ˆæé«˜å“åº”æ€§ï¼‰

### 5. æ¶ˆæ¯å»é‡ç­–ç•¥

#### çŠ¶æ€æ¶ˆæ¯
- åªåœ¨çŠ¶æ€å˜åŒ–æ—¶æ·»åŠ 
- "running"çŠ¶æ€åªåœ¨é¦–æ¬¡å‡ºç°æ—¶æ·»åŠ 
- æ£€æŸ¥æœ€åä¸€æ¡æ¶ˆæ¯é¿å…é‡å¤

#### é”™è¯¯æ¶ˆæ¯
- ä½¿ç”¨é”™è¯¯å†…å®¹å‰200å­—ç¬¦è®¡ç®—å“ˆå¸Œ
- æ£€æŸ¥æœ€è¿‘3æ¡é”™è¯¯æ¶ˆæ¯é¿å…é‡å¤
- ç›¸ä¼¼å†…å®¹ï¼ˆå‰50å­—ç¬¦ç›¸åŒï¼‰ä¸é‡å¤æ·»åŠ 

### 6. å¼‚å¸¸å¤„ç†å¢å¼º

#### æ—¥å¿—ä¿å­˜
```python
try:
    # ç¡®ä¿ç›®å½•å­˜åœ¨
    if not log_dir.exists():
        log_dir.mkdir(parents=True, exist_ok=True)

    # ä¿å­˜æ—¥å¿—
    with open(log_file, 'w') as f:
        f.write(log_content)
    self._task_log("æ—¥å¿—å·²ä¿å­˜", "info")
except Exception as e:
    self._task_log(f"ä¿å­˜æ—¥å¿—å¤±è´¥: {e}", "error")
```

#### å·¥ä½œç©ºé—´æ¸…ç†
```python
try:
    self.task_executor.cleanup_workspace()
    self._task_log("å·¥ä½œç©ºé—´å·²æ¸…ç†", "info")
except Exception as e:
    self._task_log(f"æ¸…ç†å·¥ä½œç©ºé—´å¤±è´¥: {e}", "error")
```

## è§£å†³çš„é—®é¢˜

1. **çŠ¶æ€æ˜¾ç¤ºä¸å…¨**: ç°åœ¨æ”¯æŒæ‰€æœ‰çŠ¶æ€ç ï¼ŒåŒ…æ‹¬ä¸­æ–­ã€ä¿¡å·ç­‰
2. **æµå¼è¾“å‡ºé˜»å¡**: ä½¿ç”¨ç¼“å†²åŒºæ‰¹å¤„ç†ï¼Œé¿å…UIå†»ç»“
3. **åœæ­¢æŒ‰é’®æ— æ•ˆ**: æ­£ç¡®ç»ˆæ­¢è¿›ç¨‹ç»„ï¼ŒåŒ…æ‹¬å­è¿›ç¨‹
4. **æ—¥å¿—ä¿å­˜å¤±è´¥**: ç¡®ä¿è¿›ç¨‹ç»“æŸåæ‰æ¸…ç†å·¥ä½œç©ºé—´
5. **æ¶ˆæ¯é‡å¤**: ä½¿ç”¨å“ˆå¸Œå’Œå†…å®¹æ£€æŸ¥é¿å…é‡å¤
6. **ç›‘æ§å»¶è¿Ÿ**: æé«˜æ£€æŸ¥é¢‘ç‡åˆ°0.5ç§’

## æµ‹è¯•è¦ç‚¹

1. æ‰§è¡Œé•¿æ—¶é—´ä»»åŠ¡ï¼Œæ£€æŸ¥æµå¼è¾“å‡ºæ˜¯å¦æµç•…
2. ç‚¹å‡»åœæ­¢æŒ‰é’®ï¼ŒéªŒè¯è¿›ç¨‹ç«‹å³ç»ˆæ­¢
3. æ£€æŸ¥statusæ–‡ä»¶çš„å„ç§çŠ¶æ€ç æ˜¾ç¤º
4. éªŒè¯erroræ–‡ä»¶å†…å®¹æ­£ç¡®æ˜¾ç¤º
5. ç¡®è®¤æ—¥å¿—æ–‡ä»¶èƒ½æ­£ç¡®ä¿å­˜
6. æµ‹è¯•å¤§é‡è¾“å‡ºæ—¶UIä¸ä¼šå¡é¡¿